;             
CREATE USER IF NOT EXISTS ADMIN SALT 'af20e8ec611d8aab' HASH '9bc4f547e973527e5df74e46b5cb149141f2aa45718a1ff60b4ad5a8de0edcd4' ADMIN;        
CREATE USER IF NOT EXISTS SA SALT '89a7cd44b5fd86ac' HASH '6c6f691dc57b41c28526ba1efa599eefd91bf55e8b454773df1e22eba6f83e22' ADMIN;           
DROP TABLE IF EXISTS PUBLIC.EVALUATION CASCADE;               
DROP TABLE IF EXISTS PUBLIC.EXAM CASCADE;     
DROP TABLE IF EXISTS PUBLIC.FINALGRADE CASCADE;               
DROP TABLE IF EXISTS PUBLIC.MEETING CASCADE;  
DROP TABLE IF EXISTS PUBLIC.PARTICIPANT CASCADE;              
DROP TABLE IF EXISTS PUBLIC.PARTICIPANTSTATUS CASCADE;        
DROP TABLE IF EXISTS PUBLIC.SUBMISSION CASCADE;               
DROP TABLE IF EXISTS PUBLIC.TASK CASCADE;     
DROP TABLE IF EXISTS PUBLIC.TGROUP CASCADE;   
DROP TABLE IF EXISTS PUBLIC.TUTORIAL CASCADE; 
DROP TABLE IF EXISTS PUBLIC.USER CASCADE;     
DROP TABLE IF EXISTS PUBLIC.USERMEETINGROLE CASCADE;          
DROP TABLE IF EXISTS PUBLIC.USERMEETINGROLE_TUTORIAL CASCADE; 
CREATE CACHED TABLE PUBLIC.EVALUATION(
    ID VARCHAR(255) NOT NULL,
    COMMENT VARCHAR(255),
    DATE TIMESTAMP,
    GRADE DECIMAL(19, 2),
    POINTS DECIMAL(19, 2),
    VERSION BIGINT,
    EXAM_ID VARCHAR(255),
    PARTICIPANTSTATUS_ID VARCHAR(255),
    SUBMISSION_ID VARCHAR(255),
    TASK_ID VARCHAR(255),
    USER_ID VARCHAR(255)
);
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.CONSTRAINT_5 PRIMARY KEY(ID);             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.EVALUATION;              
CREATE CACHED TABLE PUBLIC.EXAM(
    ID VARCHAR(255) NOT NULL,
    DATE TIMESTAMP,
    LOCATION VARCHAR(255),
    NAME VARCHAR(255),
    VERSION BIGINT,
    WEIGHTING DECIMAL(19, 2),
    MEETING_ID VARCHAR(255)
); 
ALTER TABLE PUBLIC.EXAM ADD CONSTRAINT PUBLIC.CONSTRAINT_2 PRIMARY KEY(ID);   
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.EXAM;    
CREATE CACHED TABLE PUBLIC.FINALGRADE(
    ID VARCHAR(255) NOT NULL,
    OVERALLGRADE DECIMAL(19, 2),
    PASSED BOOLEAN,
    SUBMISSIONGRADE DECIMAL(19, 2),
    VERSION BIGINT,
    MEETING_ID VARCHAR(255),
    PARTICIPANTSTATUS_ID VARCHAR(255)
);               
ALTER TABLE PUBLIC.FINALGRADE ADD CONSTRAINT PUBLIC.CONSTRAINT_A PRIMARY KEY(ID);             
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.FINALGRADE;              
CREATE CACHED TABLE PUBLIC.MEETING(
    ID VARCHAR(255) NOT NULL,
    NAME VARCHAR(255),
    ONLYGROUPSPLIT BOOLEAN,
    SUBMISSIONWEIGHTING DECIMAL(19, 2),
    VERSION BIGINT,
    VISIBLE BOOLEAN,
    WISO BOOLEAN,
    YEAR TIMESTAMP
);        
ALTER TABLE PUBLIC.MEETING ADD CONSTRAINT PUBLIC.CONSTRAINT_6 PRIMARY KEY(ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.MEETING; 
CREATE CACHED TABLE PUBLIC.PARTICIPANT(
    ID VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255),
    FIRSTNAME VARCHAR(255),
    LASTNAME VARCHAR(255),
    MATRIKELNR INTEGER,
    SEMESTER INTEGER,
    STATUS VARCHAR(255),
    VERSION BIGINT
);    
ALTER TABLE PUBLIC.PARTICIPANT ADD CONSTRAINT PUBLIC.CONSTRAINT_AE PRIMARY KEY(ID);           
-- 16 +/- SELECT COUNT(*) FROM PUBLIC.PARTICIPANT;            
INSERT INTO PUBLIC.PARTICIPANT(ID, EMAIL, FIRSTNAME, LASTNAME, MATRIKELNR, SEMESTER, STATUS, VERSION) VALUES
('0f9ab69b-6865-4c81-94e8-352d6a0dc8a8', 'Ziegler@uni-bremen.de', 'Lea', 'Ziegler', 1355478, 21, 'Immatrikuliert', 0),
('0808bfc3-0743-4105-ad8d-8c90fd6fa85d', 'Schulte@uni-bremen.de', 'Leonie', 'Schulte', 5363472, 21, 'Immatrikuliert', 0),
('20c4e541-c0d3-469c-ac3c-2cb29c8edc93', 'Busch@uni-bremen.de', 'Laura', 'Busch', 1335472, 21, 'Immatrikuliert', 0),
('b6082393-6252-4d87-93ed-4248dca46a04', 'Schmidt@uni-bremen.de', 'Lara', 'Schmidt', 6365772, 21, 'Immatrikuliert', 0),
('510980aa-228b-4d3e-8530-3de355682a8d', STRINGDECODE('Sch\u00e4fer@uni-bremen.de'), 'Sofie', STRINGDECODE('Sch\u00e4fer'), 4565472, 22, 'Immatrikuliert', 0),
('2eb26c16-a00a-4b3a-831c-9492956817e3', 'OscarBusch@uni-bremen.de', 'Oscar', 'Busch', 1372472, 21, 'Immatrikuliert', 0),
('d2cb9ce2-da8e-4314-b66c-9cec494b8e8f', 'Frank@uni-bremen.de', 'Philipp', 'Frank', 9345472, 21, 'Immatrikuliert', 0),
('879159a5-05e8-4a8b-846f-f50e65c80f9a', STRINGDECODE('B\u00f6hm@uni-bremen.de'), 'Jakob ', STRINGDECODE('B\u00f6hm'), 6365462, 21, 'Immatrikuliert', 0),
('04cf118d-c5bc-4e29-8efc-98d88e529fbd', 'LuisaHoffmann@uni-bremen.de', 'Luisa ', 'Hoffmann', 1345432, 21, 'Immatrikuliert', 0),
('d7fd5a1b-fd55-4164-8ff4-c10c460e860f', 'Zimmermann@uni-bremen.de', 'Nele ', 'Zimmermann', 6365472, 21, 'Immatrikuliert', 0),
('54431ee7-76ce-4c80-aaea-1abc8277b700', 'Jung@uni-bremen.de', 'Julian', 'Jung', 1345672, 21, 'Immatrikuliert', 0),
('3c9ab824-a80c-4b2a-ac8b-fddff52ea30b', 'Werner@uni-bremen.de', 'Lotta', 'Werner', 1365472, 21, 'Immatrikuliert', 0),
('5024fb79-d6ad-4728-95b2-5e78817632bb', 'Walter@uni-bremen.de', 'Paula', 'Walter', 1345472, 21, 'Immatrikuliert', 0),
('b4ca50a8-90ff-412a-896a-e5cf86e05f40', 'Mayer@uni-bremen.de', 'Simon', 'Mayer', 4565472, 21, 'Immatrikuliert', 0),
('c417b855-cb77-4915-8ca7-b2d0b719735e', STRINGDECODE('M\u00f6ller@uni-bremen.de'), 'Lisa', STRINGDECODE('M\u00f6ller'), 9354472, 21, 'Immatrikuliert', 0),
('c43531b3-7f5a-4bd1-a25c-a721f1c3d869', 'Scholz@uni-bremen.de', 'Charlotte', 'Scholz', 8665272, 21, 'Immatrikuliert', 0);            
CREATE CACHED TABLE PUBLIC.PARTICIPANTSTATUS(
    ID VARCHAR(255) NOT NULL,
    MEETINGSTATUS INTEGER,
    VERSION BIGINT,
    GROUP_ID VARCHAR(255),
    MEETING_ID VARCHAR(255),
    PARTICIPANT_ID VARCHAR(255),
    TUTORIAL_ID VARCHAR(255)
);   
ALTER TABLE PUBLIC.PARTICIPANTSTATUS ADD CONSTRAINT PUBLIC.CONSTRAINT_6D PRIMARY KEY(ID);     
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.PARTICIPANTSTATUS;       
CREATE CACHED TABLE PUBLIC.SUBMISSION(
    ID VARCHAR(255) NOT NULL,
    DATE TIMESTAMP,
    GROUPWORK BOOLEAN,
    MAXGRADE DECIMAL(19, 2),
    NAME VARCHAR(255),
    VERSION BIGINT,
    WEIGHTING DECIMAL(19, 2),
    MEETING_ID VARCHAR(255)
); 
ALTER TABLE PUBLIC.SUBMISSION ADD CONSTRAINT PUBLIC.CONSTRAINT_A1 PRIMARY KEY(ID);            
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.SUBMISSION;              
CREATE CACHED TABLE PUBLIC.TASK(
    ID VARCHAR(255) NOT NULL,
    CRITERIA VARCHAR(255),
    DATE TIMESTAMP,
    NAME VARCHAR(255),
    NUMBER DOUBLE,
    POINTS DECIMAL(19, 2),
    WEIGHTING DECIMAL(19, 2),
    SUBMISSION_ID VARCHAR(255),
    TASK_ID VARCHAR(255)
);        
ALTER TABLE PUBLIC.TASK ADD CONSTRAINT PUBLIC.CONSTRAINT_27 PRIMARY KEY(ID);  
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TASK;    
CREATE CACHED TABLE PUBLIC.TGROUP(
    ID VARCHAR(255) NOT NULL,
    MAXPA INTEGER,
    NAME VARCHAR(255),
    NUMBER INTEGER,
    VERSION BIGINT,
    TUTORIAL_ID VARCHAR(255)
);     
ALTER TABLE PUBLIC.TGROUP ADD CONSTRAINT PUBLIC.CONSTRAINT_9 PRIMARY KEY(ID); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TGROUP;  
CREATE CACHED TABLE PUBLIC.TUTORIAL(
    ID VARCHAR(255) NOT NULL,
    DATE TIMESTAMP,
    INFO VARCHAR(255),
    NAME VARCHAR(255),
    VERSION BIGINT,
    MEETING_ID VARCHAR(255)
);
ALTER TABLE PUBLIC.TUTORIAL ADD CONSTRAINT PUBLIC.CONSTRAINT_3 PRIMARY KEY(ID);               
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.TUTORIAL;
CREATE CACHED TABLE PUBLIC.USER(
    ID VARCHAR(255) NOT NULL,
    EMAIL VARCHAR(255),
    FIRSTNAME VARCHAR(255),
    LASTNAME VARCHAR(255),
    PASSWORD VARCHAR(255),
    ROLE INTEGER,
    STATUS BOOLEAN,
    VERSION BIGINT
); 
ALTER TABLE PUBLIC.USER ADD CONSTRAINT PUBLIC.CONSTRAINT_27E PRIMARY KEY(ID); 
-- 15 +/- SELECT COUNT(*) FROM PUBLIC.USER;   
INSERT INTO PUBLIC.USER(ID, EMAIL, FIRSTNAME, LASTNAME, PASSWORD, ROLE, STATUS, VERSION) VALUES
('b0657f0d-3794-4039-bc43-084ec380b544', 'admin@uni-bremen.de', 'pass', 'pass', 'a2543046aee065007b7a6dd0fbb586da7832ff40fffa55d1a9977f68768907fa', 0, TRUE, 0),
('537e2f92-837e-4f52-a5ff-24e4026c039c', STRINGDECODE('m\u00fcller@uni-bremen.de'), 'Mia', STRINGDECODE('M\u00fcller'), 'c4fec222a40420a7ae43bab600cefbf929ada25cf5e9f9713806c5e4cb533d2a', 3, TRUE, 0),
('6872f67b-17b4-41db-949a-534ba7706770', 'schmidt@uni-bremen.de', 'Emilia', 'Schmidt', 'bad85d7aa0bd95370f9f842107003ff0be407988c84b0957aff6d820a2f12f9e', 1, TRUE, 0),
('5cafcd18-518d-4c11-a652-4223813a9cf8', 'schulz@uni-bremen.de', 'Ben', 'Schulz', '700a5c61d2514afc7665fef18117d81d12f60aef1a6a74dd995e5d54e259ed52', 0, TRUE, 0),
('d2048733-87a7-4187-8252-d5c18725d0d0', 'hoffmann@uni-bremen.de', 'Leo', 'Hoffmann', '1f9ca0c4dd44b3c2df2a55006159da11090835491eea3ea20566afcf2c9cb68c', 1, TRUE, 0),
('fedf37ed-028a-49b8-9aae-9db4ee79735e', 'koch@uni-bremen.de', 'Paul ', 'Koch', '8c8d1001fa4e0833c3ddb48c721b7259d42d4bb37b4a256911bcb69ef8411e85', 3, TRUE, 0),
('3b7af147-f57b-4493-a1a3-a21cf818029f', 'schwarz@uni-bremen.de', 'Elias ', 'Schwarz', '0cce5a845c0e468833a2db9a154f7cd2fa57c9d8e04db44411086128abe1ffa5', 3, TRUE, 0),
('6ff48ea0-084e-4934-a31f-4263de9f0b6f', 'schmitz@uni-bremen.de', 'Lea ', 'Schmitz', '3f551b08f7c927e83ec57a634a5c15d1b336c01a3a79759e9407bc38afeef235', 0, TRUE, 0),
('e31fa2c2-8ff6-4f23-be3b-2993f01bae6e', 'neumann@uni-bremen.de', 'Felix ', 'Neumann', '8538b5b48980382ffb5b1e5b4766ee96079129c1a6eecfa58100df8af5f0485b', 0, TRUE, 0),
('f9ecab45-c14e-4e7e-8fde-88a1cee52b3e', 'wolf@uni-bremen.de', 'Henry ', 'Wolf', '1e7839025d6f35b6be716c91eeaec60d65c57689df3bffd42edd6e909c25005c', 1, TRUE, 0),
('8eef1d0d-8eca-46f4-80bc-30c28128c4a8', 'lange@uni-bremen.de', 'Clara ', 'Lange', 'c7ecd8a59c2abd51ad8f13ab08a2753ce151411fb970788a824da7703672cc03', 0, TRUE, 0),
('dc863596-3e42-45f2-8ccf-36a75450ec94', 'huber@uni-bremen.de', 'Ella ', 'Huber', 'e666c231319a3709ba799432d0ada6311cc434301613ab720a92bcf9980784be', 0, TRUE, 0),
('67aff328-e965-4295-adc5-5ca30c386cd6', 'frank@uni-bremen.de', 'Sophia ', 'Frank', '3d436e6f49aad2705130428202d5ef0ee6e96de41dace047df4a747daff7b188', 3, TRUE, 0),
('4f6ff92d-ecbb-416a-ac92-f393f214f079', 'horn@uni-bremen.de', 'Lukas', 'Horn', '5dff56239861667bdb9a7a979ae914bd286fe37f53a19fcdc36272bd188a88c8', 3, TRUE, 0),
('576a0974-1ed3-4f6e-a7ed-7c1493b94050', 'pfeiffer@uni-bremen.de', 'Lea', 'Pfeiffer', '98b2594058890cfd1f4024342cf3dfacb85e5ce7f0280b930c89e4208765fe0c', 3, TRUE, 0);       
CREATE CACHED TABLE PUBLIC.USERMEETINGROLE(
    ID VARCHAR(255) NOT NULL,
    ROLE INTEGER,
    VERSION BIGINT,
    MEETING_ID VARCHAR(255),
    USER_ID VARCHAR(255)
);
ALTER TABLE PUBLIC.USERMEETINGROLE ADD CONSTRAINT PUBLIC.CONSTRAINT_1 PRIMARY KEY(ID);        
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USERMEETINGROLE;         
CREATE CACHED TABLE PUBLIC.USERMEETINGROLE_TUTORIAL(
    USERMEETINGROLES_ID VARCHAR(255) NOT NULL,
    TUTORIALS_ID VARCHAR(255) NOT NULL
);              
ALTER TABLE PUBLIC.USERMEETINGROLE_TUTORIAL ADD CONSTRAINT PUBLIC.CONSTRAINT_F PRIMARY KEY(USERMEETINGROLES_ID, TUTORIALS_ID);
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.USERMEETINGROLE_TUTORIAL;
ALTER TABLE PUBLIC.USER ADD CONSTRAINT PUBLIC.UK_E6GKQUNXAJVYXL5UCTPL2VL2P UNIQUE(EMAIL);     
ALTER TABLE PUBLIC.PARTICIPANTSTATUS ADD CONSTRAINT PUBLIC.FKKSYO8KPT7PDMAO0OEO37GE4GI FOREIGN KEY(PARTICIPANT_ID) REFERENCES PUBLIC.PARTICIPANT(ID) NOCHECK; 
ALTER TABLE PUBLIC.FINALGRADE ADD CONSTRAINT PUBLIC.FK37CKX90DAAL258PT3P2MVPSY5 FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;
ALTER TABLE PUBLIC.PARTICIPANTSTATUS ADD CONSTRAINT PUBLIC.FKOS9O85TPWU46H2NLXCFAIEWK7 FOREIGN KEY(GROUP_ID) REFERENCES PUBLIC.TGROUP(ID) NOCHECK;            
ALTER TABLE PUBLIC.TGROUP ADD CONSTRAINT PUBLIC.FK1S0LYSIRCECFGOP3UF5SL20IQ FOREIGN KEY(TUTORIAL_ID) REFERENCES PUBLIC.TUTORIAL(ID) NOCHECK;  
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.FK1HMQLWCD46MN4DWY326EMVWE8 FOREIGN KEY(SUBMISSION_ID) REFERENCES PUBLIC.SUBMISSION(ID) NOCHECK;          
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.FKBOX4WM9LNAWIKD2C8TB2MVBKP FOREIGN KEY(PARTICIPANTSTATUS_ID) REFERENCES PUBLIC.PARTICIPANTSTATUS(ID) NOCHECK;            
ALTER TABLE PUBLIC.TUTORIAL ADD CONSTRAINT PUBLIC.FKMRWR488THTNR8WN71QJI551T7 FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;  
ALTER TABLE PUBLIC.USERMEETINGROLE_TUTORIAL ADD CONSTRAINT PUBLIC.FK91T41PEYSQI8L5LCIBUNLK0BB FOREIGN KEY(USERMEETINGROLES_ID) REFERENCES PUBLIC.USERMEETINGROLE(ID) NOCHECK; 
ALTER TABLE PUBLIC.EXAM ADD CONSTRAINT PUBLIC.FKSMQ7DC4XEHRCCGNMUAT875X7N FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;      
ALTER TABLE PUBLIC.USERMEETINGROLE ADD CONSTRAINT PUBLIC.FKG6P1JJK3AIGPEY6B4T865DFU1 FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;           
ALTER TABLE PUBLIC.USERMEETINGROLE ADD CONSTRAINT PUBLIC.FKJHMEHF9IEWV69AOBKSR3BVKN9 FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID) NOCHECK; 
ALTER TABLE PUBLIC.FINALGRADE ADD CONSTRAINT PUBLIC.FKBPR9788XLMEI4MRVBBO4QVH08 FOREIGN KEY(PARTICIPANTSTATUS_ID) REFERENCES PUBLIC.PARTICIPANTSTATUS(ID) NOCHECK;            
ALTER TABLE PUBLIC.PARTICIPANTSTATUS ADD CONSTRAINT PUBLIC.FKPEP03UNH0O6405P5WIVW0S63F FOREIGN KEY(TUTORIAL_ID) REFERENCES PUBLIC.TUTORIAL(ID) NOCHECK;       
ALTER TABLE PUBLIC.SUBMISSION ADD CONSTRAINT PUBLIC.FK3A373L324EL1K382PWJ8AY07M FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;
ALTER TABLE PUBLIC.TASK ADD CONSTRAINT PUBLIC.FKPALYWCUNO0F642KD66DMYXOK3 FOREIGN KEY(TASK_ID) REFERENCES PUBLIC.TASK(ID) NOCHECK;            
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.FKDFLU8KH6GDQVPHAL3XGFELIOX FOREIGN KEY(EXAM_ID) REFERENCES PUBLIC.EXAM(ID) NOCHECK;      
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.FKJYL9Q8H8GTAXVLYS3TTX2V7EN FOREIGN KEY(TASK_ID) REFERENCES PUBLIC.TASK(ID) NOCHECK;      
ALTER TABLE PUBLIC.PARTICIPANTSTATUS ADD CONSTRAINT PUBLIC.FK76FHK987CD6MDCCX7F6TAB1C4 FOREIGN KEY(MEETING_ID) REFERENCES PUBLIC.MEETING(ID) NOCHECK;         
ALTER TABLE PUBLIC.EVALUATION ADD CONSTRAINT PUBLIC.FK4969QRRVEQP1A8OBH7QFQ775Y FOREIGN KEY(USER_ID) REFERENCES PUBLIC.USER(ID) NOCHECK;      
ALTER TABLE PUBLIC.TASK ADD CONSTRAINT PUBLIC.FKH4TRQ1MUFK70HD6LP5ACX86G9 FOREIGN KEY(SUBMISSION_ID) REFERENCES PUBLIC.SUBMISSION(ID) NOCHECK;
ALTER TABLE PUBLIC.USERMEETINGROLE_TUTORIAL ADD CONSTRAINT PUBLIC.FKHRGLAA1RRJVDC3GLY1313SH2Y FOREIGN KEY(TUTORIALS_ID) REFERENCES PUBLIC.TUTORIAL(ID) NOCHECK;               
